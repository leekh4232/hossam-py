# 배포방법 정리

## 수동배포

```shell
rm -rf dist
python3 setup.py sdist bdist_wheel
python3 -m twine upload dist/*
```

## Github 자동 배포

설정: GitHub 리포지토리 Secrets에 `PYPI_API_TOKEN`(PyPI API 토큰)이 등록되어 있어야 합니다.

- 트리거: 기본으로 `main` 브랜치로의 모든 push 시 PyPI 배포가 실행됩니다.
- 워크플로 파일: `.github/workflows/publish-pypi.yml`

### 사용 방법
```bash
# 변경사항 커밋 후 main 브랜치로 푸시
git add -A
git commit -m "chore: update"
git push origin main
```

### 워크플로 동작 개요
- checkout → Python 설치 → `python -m build`로 sdist+wheel 빌드 → `pypa/gh-action-pypi-publish`로 업로드
- `skip-existing: true` 설정으로 이미 게시된 동일 버전은 업로드를 건너뜁니다.

### 브랜치 범위 변경 (선택)
모든 브랜치의 push에서 배포를 실행하려면 `.github/workflows/publish-pypi.yml`의 트리거를 다음처럼 변경합니다.

```yaml
on:
	push:
		branches:
			- '**'  # 모든 브랜치
```

주의: 모든 브랜치 트리거는 의도치 않은 배포 위험이 있으니 가급적 `main` 전용이나 태그 기반을 권장합니다.